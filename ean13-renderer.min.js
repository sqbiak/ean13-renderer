/**
 * EAN-13 Barcode Renderer
 *
 * A lightweight, professional-quality EAN-13 barcode generator
 * with proper GS1-compliant digit placement.
 *
 * @version 1.1.0
 * @license Proprietary
 * @author ZenBlock
 * @copyright (c) 2024 ZenBlock. All Rights Reserved.
 *
 * PROPRIETARY LICENSE
 *
 * Copyright (c) 2024 ZenBlock. All Rights Reserved.
 *
 * This software is proprietary and confidential. Unauthorized copying,
 * modification, distribution, or use of this software, via any medium,
 * is strictly prohibited without express written permission from ZenBlock.
 *
 * PERMITTED USE:
 * - Personal, non-commercial use is permitted free of charge
 * - Educational and evaluation purposes
 *
 * PROHIBITED WITHOUT LICENSE:
 * - Commercial use of any kind
 * - Redistribution or resale
 * - Modification for commercial purposes
 * - Inclusion in commercial products or services
 *
 * For commercial licensing inquiries, contact: sebastian.qbiak+license@gmail.com
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.EAN13Renderer=e()}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:this,function(){"use strict";const t=["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],e=["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],n=["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],i=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"],o="http://www.w3.org/2000/svg";function r(t){let e=0;for(let n=0;n<12;n++)e+=parseInt(t[n])*(n%2==0?1:3);return(10-e%10)%10}function d(o){if(12===(o=String(o).replace(/\D/g,"")).length&&(o+=r(o)),13!==o.length)throw new Error("EAN-13 requires 12 or 13 digits");const d=parseInt(o[0]),l=i[d];let s="101";for(let n=0;n<6;n++){const i=parseInt(o[n+1]);s+="L"===l[n]?t[i]:e[i]}s+="01010";for(let t=0;t<6;t++){const e=parseInt(o[t+7]);s+=n[e]}return s+="101",{encoding:s,fullCode:o}}const l={moduleWidth:2,height:70,guardExtend:10,fontSize:14,textMargin:2,quietZone:12,sideDigitGap:2,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,background:"#FFFFFF",foreground:"#000000",font:'"OCR-B", "Courier New", monospace'};function s(t,e,n={}){if("string"==typeof t&&(t=document.querySelector(t)),!t||!t.getContext)throw new Error("Invalid canvas element");const i={...l,...n},{moduleWidth:o,height:r,guardExtend:s,fontSize:u,textMargin:c,quietZone:a,sideDigitGap:f,paddingLeft:g,paddingRight:p,paddingTop:h,paddingBottom:L,background:b,foreground:m,font:A}=i,{encoding:G,fullCode:x}=d(e),w=r+s,S=G.length*o+2*a+g+p,y=w+u+c+h+L;t.width=S,t.height=y;const E=t.getContext("2d");E.fillStyle=b,E.fillRect(0,0,S,y);const C=g,T=h;E.fillStyle=m;let v=C+a;for(let t=0;t<G.length;t++){const e=t<3||t>=45&&t<50||t>=92?w:r;"1"===G[t]&&E.fillRect(v,T,o,e),v+=o}E.fillStyle=m,E.font=`${u}px ${A}`,E.textBaseline="top";const N=T+r+c;E.textAlign="right",E.fillText(x[0],C+a-f,N),E.textAlign="center";const R=C+a+3*o;for(let t=0;t<6;t++){const e=R+7*(t+.5)*o;E.fillText(x[t+1],e,N)}const z=C+a+50*o;for(let t=0;t<6;t++){const e=z+7*(t+.5)*o;E.fillText(x[t+7],e,N)}return t}function u(t,e,n={}){if("string"==typeof t&&(t=document.querySelector(t)),!t)throw new Error("Invalid SVG element");const i={...l,...n},{moduleWidth:r,height:s,guardExtend:u,fontSize:c,textMargin:a,quietZone:f,sideDigitGap:g,paddingLeft:p,paddingRight:h,paddingTop:L,paddingBottom:b,background:m,foreground:A,font:G}=i,{encoding:x,fullCode:w}=d(e),S=s+u,y=x.length*r+2*f+p+h,E=S+c+a+L+b;t.innerHTML="",t.setAttribute("xmlns",o),t.setAttribute("width",y),t.setAttribute("height",E),t.setAttribute("viewBox",`0 0 ${y} ${E}`);const C=document.createElementNS(o,"rect");C.setAttribute("width",y),C.setAttribute("height",E),C.setAttribute("fill",m),t.appendChild(C);const T=p,v=L;let N=T+f;for(let e=0;e<x.length;e++){const n=e<3||e>=45&&e<50||e>=92?S:s;if("1"===x[e]){const e=document.createElementNS(o,"rect");e.setAttribute("x",N),e.setAttribute("y",v),e.setAttribute("width",r),e.setAttribute("height",n),e.setAttribute("fill",A),t.appendChild(e)}N+=r}const R=v+s+a+c,z=document.createElementNS(o,"text");z.setAttribute("x",T+f-g),z.setAttribute("y",R),z.setAttribute("text-anchor","end"),z.setAttribute("font-family",G),z.setAttribute("font-size",c),z.setAttribute("fill",A),z.textContent=w[0],t.appendChild(z);const B=T+f+3*r;for(let e=0;e<6;e++){const n=B+7*(e+.5)*r,i=document.createElementNS(o,"text");i.setAttribute("x",n),i.setAttribute("y",R),i.setAttribute("text-anchor","middle"),i.setAttribute("font-family",G),i.setAttribute("font-size",c),i.setAttribute("fill",A),i.textContent=w[e+1],t.appendChild(i)}const D=T+f+50*r;for(let e=0;e<6;e++){const n=D+7*(e+.5)*r,i=document.createElementNS(o,"text");i.setAttribute("x",n),i.setAttribute("y",R),i.setAttribute("text-anchor","middle"),i.setAttribute("font-family",G),i.setAttribute("font-size",c),i.setAttribute("fill",A),i.textContent=w[e+7],t.appendChild(i)}return t}return{render:s,renderSVG:u,toDataURL:function(t,e={}){const n=document.createElement("canvas");return s(n,t,e),n.toDataURL("image/png")},toBlob:function(t,e={}){return new Promise((n,i)=>{const o=document.createElement("canvas");s(o,t,e),o.toBlob(t=>{t?n(t):i(new Error("Failed to create blob"))},"image/png")})},toSVG:function(t,e={}){const n=document.createElementNS(o,"svg");return u(n,t,e),(new XMLSerializer).serializeToString(n)},encode:d,validate:function(t){return 12===(t=String(t).replace(/\D/g,"")).length||13===t.length&&parseInt(t[12])===r(t.substring(0,12))},calculateChecksum:r,version:"1.1.0",DEFAULTS:l}});